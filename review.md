# PHP App ① レビュー

## 全般

### 以下のaタグのリンクを押下した際にedit.phpの$_GETにどんな値が格納されるか説明してください。

```html
<a href="edit.php?todo_id=123&todo_content=焼肉">更新</a>
```
- 以下のように連想配列で格納される。
$_GET = [
    'todo_id' => '123',
    'todo_content' => '焼肉'
];

### 以下のフォームの送信ボタンを押下した際にstore.phpの$_POSTにどんな値が格納されるか説明してください。

```html
<form action="store.php" method="post">
    <input type="text" name="id" value="123">
		<textarea　name="content">焼肉</textarea>
    <button type="submit">送信</button>
</form>
```
- 以下のように連想配列で格納される。
$_POST = [
    'id' => '123',
    'content' => '焼肉'
];

### `require_once()` は何のために記述しているか説明してください。
- 同じファイルを何度も読み込むのを防ぐため。

### `savePostedData($post)`は何をしているか説明してください。

### `header('location: ./index.php')`は何をしているか説明してください。
- header関数を使って「./index.php」にページをリダイレクトするための処理をしている

### `getRefererPath()`は何をしているか説明してください。

### `connectPdo()` の返り値は何か、またこの記述は何をするための記述か説明してください。
- PDOオブジェクトです。データベースに接続するための設定を行い、
  接続を確立するための記述です。

### `try catch`とは何か説明してください。
- エラー発生時にプログラムがクラッシュすることを防ぎ、
  代わりにエラー処理を行うための仕組みです。

### Pdoクラスをインスタンス化する際に`try catch`が必要な理由を説明してください。
- PDOを使ってデータベースに接続する際に、ネットワークの接続不良や
  ログインパスワードを間違えているなど、データベースの接続が失敗する可能性があるため。

## 新規作成

### `createTodoData($post)`は何をしているか説明してください。
- createTodoData関数に「$post」の値を引数として、渡している。
  これにより、$post配列のcontentキーに対応する値がデータベースに保存される。

## 一覧

### `getTodoList()`の返り値について説明してください。
- getAllRecords()関数の動作結果が返り値
  getAllRecords()関数の動作は、todosテーブルからdeleted_atが
  NULLであるすべてのレコードを含む配列を取得するため、その配列が返り値です。

### `<?= ?>`は何の省略形か説明してください。
- <?= ?>は、<?php echo ?> の省略形です。
  PHPコード内で、変数や文字列を短く出力するために使われます。
  
## 更新

### `getSelectedTodo($_GET['id'])`の返り値は何か、またなぜ`$_GET['id']` を引数に渡すのか説明してください。
-  getTodoTextByIdの処理された結果である、idに対応するレコードのcontentが返り値。
- `$_GET['id']` を引数に渡す理由はURLから渡された特定のidに基づいてレコードを選択するため。
### `updateTodoData($post)`は何をしているか説明してください。
- データベースの接続を確立し、
データベース内のtodosテーブルにある特定の「content」を更新するための関数です。
postメソッドで送信されてきたtodosテーブルの中の「id」の行にある「cotent」カラムの値を更新し、
更新された値を返り値として渡している。
## 削除

### `deleteTodoData($id)`は何をしているか説明してください。
- deleteTodoData($id) は、指定された「id」のレコードに対して論理削除を行う関数です。

### `deleted_at`を現在時刻で更新すると一覧画面からToDoが非表示になる理由を説明してください。
- index.htmlで表示されているデータは「deleted_at IS NULL」の条件に合致しているレコードを表示している。つまり、deleted_atのカラムに「NULL」 のレコードだけを取得します。
「deleted_at 」カラムに現在時刻が入れる処理をすると、「NULL」ではなくなるため、非表示になる。

### 今回のように実際のデータを削除せずに非表示にすることで削除されたように扱うことを〇〇削除というか。
- 論理削除

### 実際にデータを削除することを〇〇削除というか。
- 物理削除

### 前問のそれぞれの削除のメリット・デメリットについて説明してください。
* 論理削除
  * メリット・・・削除したデータを復元出来る。
  * デメリット・・削除フラグを立てるためにカラムを用意しなければならない。かつ、一覧に表示しないようにSQL文を作成しないといけない
* 物理削除
  * メリット・・・データベースの容量を食わない。
  * デメリット・・間違って削除してしまった時に、元に戻せないのでデータの参照や復元が出来ない。